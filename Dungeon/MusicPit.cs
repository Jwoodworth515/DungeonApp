using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using ClassLibrary;
using System.Threading;

namespace Dungeon
{
    class MusicPit
    {
        static void Main(string[] args)
        {
            //TODO - Add Console Beeps to Player Victory
            //TODO - Add Console Beeps to Player Defeat
            //TODO - Add Functionality to reach High Score and enter Finale BattleRoom
            //TODO - Add Console Beeps to Finale Room Battle(Backstage)
            //TOD0 - Add Console Beeps to Completetion of Game
            //TODO - Add Crystal Ball to Room
            //TODO - Adjust Monster Attributes

            Console.Title = "The Music Pit";
            Thread.Sleep(1000);
            Console.WriteLine();
            Console.WriteLine();
            Console.WriteLine("\nCan you survive the perils of\n");
            Thread.Sleep(2500);
            Console.WriteLine();
            Console.ForegroundColor = ConsoleColor.Red;
            Console.WriteLine(@"
▄▄▄█████▓ ██░ ██ ▓█████     ███▄ ▄███▓ █    ██   ██████  ██▓ ▄████▄      ██▓███   ██▓▄▄▄█████▓
▓  ██▒ ▓▒▓██░ ██▒▓█   ▀    ▓██▒▀█▀ ██▒ ██  ▓██▒▒██    ▒ ▓██▒▒██▀ ▀█     ▓██░  ██▒▓██▒▓  ██▒ ▓▒
▒ ▓██░ ▒░▒██▀▀██░▒███      ▓██    ▓██░▓██  ▒██░░ ▓██▄   ▒██▒▒▓█    ▄    ▓██░ ██▓▒▒██▒▒ ▓██░ ▒░
░ ▓██▓ ░ ░▓█ ░██ ▒▓█  ▄    ▒██    ▒██ ▓▓█  ░██░  ▒   ██▒░██░▒▓▓▄ ▄██▒   ▒██▄█▓▒ ▒░██░░ ▓██▓ ░ 
  ▒██▒ ░ ░▓█▒░██▓░▒████▒   ▒██▒   ░██▒▒▒█████▓ ▒██████▒▒░██░▒ ▓███▀ ░   ▒██▒ ░  ░░██░  ▒██▒ ░ 
  ▒ ░░    ▒ ░░▒░▒░░ ▒░ ░   ░ ▒░   ░  ░░▒▓▒ ▒ ▒ ▒ ▒▓▒ ▒ ░░▓  ░ ░▒ ▒  ░   ▒▓▒░ ░  ░░▓    ▒ ░░   
    ░     ▒ ░▒░ ░ ░ ░  ░   ░  ░      ░░░▒░ ░ ░ ░ ░▒  ░ ░ ▒ ░  ░  ▒      ░▒ ░      ▒ ░    ░    
  ░       ░  ░░ ░   ░      ░      ░    ░░░ ░ ░ ░  ░  ░   ▒ ░░           ░░        ▒ ░  ░      
          ░  ░  ░   ░  ░          ░      ░           ░   ░  ░ ░                   ░           
                                                            ░                                 
");
            Thread.Sleep(3000);
            Console.BackgroundColor = ConsoleColor.Black;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.DarkRed;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.Black;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.DarkRed;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.Black;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.DarkRed;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.Black;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.DarkRed;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.Black;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.DarkRed;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.Black;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.DarkRed;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.Black;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.DarkRed;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.Black;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.DarkRed;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.Black;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.DarkRed;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.Black;
            Console.Clear();
            Console.BackgroundColor = ConsoleColor.DarkRed;
            Console.Clear();
            Console.ForegroundColor = ConsoleColor.DarkRed;
            Console.BackgroundColor = ConsoleColor.Black;

            Console.Clear();
            Console.WriteLine();
            Console.WriteLine(@"                         
                           {    }
                           K,   }
                          /  ~Y`
                     ,   /   /
                    {_'-K.__/
                      `/-.__L._
                      /  ' /`\_}
                     /  ' /
             ____   /  ' /
      ,-'~~~~    ~~/  ' /_
    ,'             ``~~~  ',
   (                        Y
  {                         I
 {      -                    `,
 |       ',                   )
 |        |   ,..__      __. Y
 |    .,_./  Y ' / ^Y   J   )|
 \           |' /   |   |   ||
  \          L_/    . _ (_,.'(
   \,   ,      ^^""' / |      )
     \_  \          /,L]     /
       '-_~-,       ` `   ./`
          `'{_            )
              ^^\..___,.--`");

            Thread.Sleep(10);
            Console.Clear();
            Console.WriteLine(@"                         
                           {    }
                           K,   }
                          /  ~Y`
                     ,   /   /
                    {_'-K.__/
                      `/-.__L._
                      /  ' /`\_}
                     /  ' /
             ____   /  ' /
      ,-'~~~~    ~~/  ' /_
    ,'             ``~~~  ',
   (                        Y
  {                         I
 {      -                    `,
 |       ',                   )
 |        |   ,..__      __. Y
 |    .,_./  Y ' / ^Y   J   )|
 \           |' /   |   |   ||
  \          L_/    . _ (_,.'(
   \,   ,      ^^""' / |      )
     \_  \          /,L]     /
       '-_~-,       ` `   ./`
          `'{_            )
              ^^\..___,.--`");

            Thread.Sleep(10);
            Console.Clear();
            Console.WriteLine(@"                         
                           {    }
                           K,   }
                          /  ~Y`
                     ,   /   /
                    {_'-K.__/
                      `/-.__L._
                      /  ' /`\_}
                     /  ' /
             ____   /  ' /
      ,-'~~~~    ~~/  ' /_
    ,'             ``~~~  ',
   (                        Y
  {                         I
 {      -                    `,
 |       ',                   )
 |        |   ,..__      __. Y
 |    .,_./  Y ' / ^Y   J   )|
 \           |' /   |   |   ||
  \          L_/    . _ (_,.'(
   \,   ,      ^^""' / |      )
     \_  \          /,L]     /
       '-_~-,       ` `   ./`
          `'{_            )
              ^^\..___,.--`");

            Thread.Sleep(20);
            Console.Clear();
            Console.WriteLine(@"                         
                           {    }
                           K,   }
                          /  ~Y`
                     ,   /   /
                    {_'-K.__/
                      `/-.__L._
                      /  ' /`\_}
                     /  ' /
             ____   /  ' /
      ,-'~~~~    ~~/  ' /_
    ,'             ``~~~  ',
   (                        Y
  {                         I
 {      -                    `,
 |       ',                   )
 |        |   ,..__      __. Y
 |    .,_./  Y ' / ^Y   J   )|
 \           |' /   |   |   ||
  \          L_/    . _ (_,.'(
   \,   ,      ^^""' / |      )
     \_  \          /,L]     /
       '-_~-,       ` `   ./`
          `'{_            )
              ^^\..___,.--`");

            Console.WriteLine();
            Thread.Sleep(2000);
            Console.WriteLine();
            Console.WriteLine("Press any key to enter if you dare");
            Console.ReadKey(true);
            Console.ResetColor();
            Console.Clear();
            Console.WriteLine();
            Console.WriteLine();
            Console.WriteLine("There are many obstacles that stand between you and the coveted Backstage\n");
            Thread.Sleep(3000);
            Console.Write("Will your story tell the legend of a Hero?\n");
            Thread.Sleep(2500);
            Console.WriteLine("or that of a Villain?\n");
            Thread.Sleep(2500);


            bool repeatMenu = false;
            do
            {
                Thread.Sleep(1000);
                Console.WriteLine("Choose your path:\n" +
                    "H) Hero\n" +
                    "V) Villain\n");

                ConsoleKey userChoice = Console.ReadKey().Key;
                Console.Clear();
                switch (userChoice)
                {
                    case ConsoleKey.H:
                        Console.WriteLine("You have chosen the high ground....\n");
                        repeatMenu = false;

                        break;
                    case ConsoleKey.V:
                        Console.WriteLine("You have chosen a dark path...\n");
                        repeatMenu = false;

                        break;
                    //Fix Loop
                    default:
                        Console.WriteLine("There are only two paths, choose your destiny!\n");
                        repeatMenu = true;
                        break;
                }
            } while (repeatMenu);

            Thread.Sleep(2000);
            Console.Write("Your path is chosen, your destiny awaits as you descend into the Madness........\n");
            Thread.Sleep(4000);
            

            int score = 0;
            Console.WriteLine(score);


            #region MyRegion
            //bool repeatQuestion = false;
            //do
            //{
            //Thread.Sleep(1000);
            //Console.WriteLine("Choose your path:\n" +
            //    "H) Hero\n" +
            //    "V) Villain\n");
            //ConsoleKey userChoice = Console.ReadKey(true).Key;
            //switch (userChoice)
            //{
            //    case ConsoleKey.H:
            //        Console.WriteLine("Your friends will speak of this night as if it were a myth.");


            //            //if (true)
            //            //{
            //            //Random rand1 = new Random();
            //                //int randomNbr1 = rand1.Next(Player.Length);
            //                //Player player = Player[randomNbr1];
            //            //}
            //            break;
            //    case ConsoleKey.V:
            //        Console.WriteLine("You have chosen a dark path...");
            //            //if (true)
            //            //{
            //            // Monster[] monsters = { t1, s1, };
            //            //Random rand2 = new Random();
            //            //int randomNbr2 = rand2.Next(Monster.Length);
            //            //Monster monster = monster[randomNbr2];
            //            //}
            //            break;
            //            //Fix Loop
            //    default: 
            //        Console.WriteLine("There are only two paths, choose your destiny!");
            //            break;
            //}
            //} while (repeatQuestion);
            //Thread.Sleep(1000);
            #endregion
            Console.Clear();

            Weapon fannyPack = new Weapon(1, 10, "Fanny Pack", 12, false);
            Weapon sharpieMarker = new Weapon(1, 10, "Sharpie Marker", 12, false);
            Weapon sickMoves = new Weapon(1, 10, "Sick Moves", 12, false);
            Weapon tourPoster = new Weapon(1, 10, "Sick Moves", 12, false);
            Weapon blankGazeOfDoom = new Weapon(1, 10, "Sick Moves", 12, false);
            Weapon tourLanyard = new Weapon(1, 10, "Sick Moves", 12, false);
            Weapon glowSticks = new Weapon(1, 10, "Sick Moves", 12, false);

            Player player = new Player("The Hipster", 50, 15, 40, 40, Hero.TheHipster, fannyPack, "This guy means business with his fanny pack!");

            bool exit1 = false;

            do
            {
                Console.WriteLine(GetRoom());
                Thread.Sleep(2000);


                Trainwreck t1 = new Trainwreck("The Trainwreck", 15, 20, 35, 25, 1, 14, "There's an intoxobeast here, don't look her in the eyes!");
                Scalper s1 = new Scalper("The Scalper", 5, 5, 25, 25, 1, 12, "This guy doesn't know when to quit!");
                Heckler h1 = new Heckler("The Heckler", 10, 10, 25, 15, 1, 10, "His sharp tongue is powered by his dim wit.  His words can cut right through you!");
                FunPolice f1 = new FunPolice("The Fun Police", 15, 20, 30, 25, 4, 15, "The Fun Police are on the scene and will shut any party down." + 
                    "Their flashlight doubles as a nightstick, protect your dome.");
                Bro b1 = new Bro("The Bro", 10, 15, 25, 40, 2, 8, "This bro thinks you disrespected him and has been fist pumping all night, he's out for a fight!");
                MudPeople mp1 = new MudPeople("The Mud People", 10, 10, 40, 10, 1, 5, "The amount of filth dripping from them is spellbinding." + 
                    "Don't get too close, they want you to join them.");
                Hippie hi1 = new Hippie("The Hippie", 10, 10, 10, 50, 1, 15, "With determination the hippie flings her hula hoop around without a care in the world," + 
                    "if you're not careful she will beat you to death with her hobby.");

                Monster[] monsters = { t1, s1, h1, f1, b1, mp1, hi1 };

                Random rando = new Random();
                int randomNbr = rando.Next(monsters.Length);
                Monster monster = monsters[randomNbr];

                Console.WriteLine(monster.Name);

                bool reload = false;

                do
                {
                    #region Menu
                    Console.ForegroundColor = ConsoleColor.DarkGray;
                    Console.WriteLine("\nPlease Choose an Action:\n" +
                        "A) Attack\n" +
                        "R) Run Away\n" +
                        "P) Player Info\n" +
                        "M) Monster Info\n" +
                        "X) Exit\n");

                    ConsoleKey userChoice1 = Console.ReadKey(true).Key;
                    Console.Clear();

                    switch (userChoice1)
                    {
                        case ConsoleKey.A:
                            Console.ForegroundColor = ConsoleColor.Red;
                            Console.WriteLine();
                            Console.WriteLine("Attack\n");
                            Console.ResetColor();
                            Combat.DoBattle(player, monster);
                            if (monster.Life <= 0)
                            {
                                Console.ForegroundColor = ConsoleColor.DarkGreen;
                                Console.WriteLine("\nYou defeated {0}!\n", monster.Name);
                                Console.ResetColor();
                                Console.WriteLine("Press any key to enter the next room");
                                Console.ReadKey(true);
                                Console.Clear();
                                
                                reload = true;

                                score++;

                            }
                            break;
                        case ConsoleKey.R:
                            Console.ForegroundColor = ConsoleColor.DarkMagenta;
                            Console.WriteLine("Escape");
                            Console.WriteLine($"{monster.Name} attacks you as you flee!");
                            Combat.DoAttack(monster, player);
                            Console.WriteLine();
                            reload = true;
                            break;
                        case ConsoleKey.P:
                            Console.ForegroundColor = ConsoleColor.DarkYellow;
                            Console.WriteLine("Player Info");
                            Console.WriteLine(player);
                            Console.WriteLine("Monsters defeated: " + score);

                            break;
                        case ConsoleKey.M:
                            Console.ForegroundColor = ConsoleColor.DarkRed;
                            Console.WriteLine("Monster Info");
                            Console.WriteLine(monster);

                            break;
                        case ConsoleKey.X:
                        case ConsoleKey.E:
                            Console.WriteLine("You couldn't beat the game if you wanted to! Loser");
                            exit1 = true;
                            break;
                        default:
                            Console.WriteLine("ah ah ah, you didn't say the magic word.");
                            break;
                    }//end switch
                    #endregion

                    if (player.Life <= 0)
                    {
                        Console.ForegroundColor = ConsoleColor.Red;
                        Console.WriteLine(@"
▓██   ██▓ ▒█████   █    ██      █████▒▄▄▄       ██▓ ██▓    ▓█████ ▓█████▄ 
 ▒██  ██▒▒██▒  ██▒ ██  ▓██▒   ▓██   ▒▒████▄    ▓██▒▓██▒    ▓█   ▀ ▒██▀ ██▌
  ▒██ ██░▒██░  ██▒▓██  ▒██░   ▒████ ░▒██  ▀█▄  ▒██▒▒██░    ▒███   ░██   █▌
  ░ ▐██▓░▒██   ██░▓▓█  ░██░   ░▓█▒  ░░██▄▄▄▄██ ░██░▒██░    ▒▓█  ▄ ░▓█▄   ▌
  ░ ██▒▓░░ ████▓▒░▒▒█████▓    ░▒█░    ▓█   ▓██▒░██░░██████▒░▒████▒░▒████▓ 
   ██▒▒▒ ░ ▒░▒░▒░ ░▒▓▒ ▒ ▒     ▒ ░    ▒▒   ▓▒█░░▓  ░ ▒░▓  ░░░ ▒░ ░ ▒▒▓  ▒ 
 ▓██ ░▒░   ░ ▒ ▒░ ░░▒░ ░ ░     ░       ▒   ▒▒ ░ ▒ ░░ ░ ▒  ░ ░ ░  ░ ░ ▒  ▒ 
 ▒ ▒ ░░  ░ ░ ░ ▒   ░░░ ░ ░     ░ ░     ░   ▒    ▒ ░  ░ ░      ░    ░ ░  ░ 
 ░ ░         ░ ░     ░                     ░  ░ ░      ░  ░   ░  ░   ░    
 ░ ░                                                               ░      
");
                        Thread.Sleep(2000);
                        Console.ResetColor();
                        Console.WriteLine("Now you'll never reach the backstage!");
                        Thread.Sleep(2000);
                        Console.ForegroundColor = ConsoleColor.Red;
                        Console.WriteLine($"You defeated {score} monsters during your game!");
                    }

                } while (!exit1 && !reload); //end inside do
            } while (!exit1); // end outer do

            Console.WriteLine("You defeated " + score + " monster" + (score == 1 ? "." : "s."));

        }//end Main()

        private static string GetRoom()
        {
            Console.ForegroundColor = ConsoleColor.Red;
            string[] rooms =
                {
                 "THE BATHROOM - A wall that holds a seat with a hole in it is in this chamber.\n" +
                 "It's a privy!\n" +
                 "The noisome stench from the hole leads you to believe that the privy sees regular use.\n" +
                 "Stinking smoke wafts up from braziers made of skulls set around the edges of this room.\n" +
                 "The walls bear scratch marks and lines of soot that form crude pictures\n" +
                 "and what looks like words in some strange language.\n" +
                 "As if things weren't bad enough, in the last stall you spot \n",
                "CONCESSION LINE - Neither light nor dark can penetrate the gloom in this chamber.\n" +
                "An unnatural shade fills it, and the room's farthest reaches are barely visible.\n" +
                "Lining the pillars are skeletons of all shapes and sizes.\n" +
                "It's as if anyone that enters this room, never makes the journey to the other end.\n" +
                "At the far end you can just barely perceive a lump about the size of a human lying on the floor.\n" +
                "(It might be a dead body, a pile of rags, or a sleeping monster that can take advantage of the room's darkness.)\n" + 
                "Oh No, it's \n",
                "THE PIT - This room makes everyone entering it feel claustrophobic.\n" +
                "The walls feel like they are constantly closing in, and ceiling looks menacing.\n" +
                "The energy here is amplified by the deafening noise as you gasp for air.\n" + 
                "There is no escaping the pit without first battling \n",
                "THE PARKING LOT - A chill wind blows against you as you open the door.\n" +
                "Beyond it, you see that the floor and ceiling are nothing but iron grates.\n" +
                "Above and below the grates the walls extend up and down with no true ceiling or floor within your range of vision.\n" +
                "It's as though the chamber is a bridge through the shaft of a great well.\n" +
                "Standing on the edge of this shaft, you feel a chill wind pass down it and over your shoulder into the hall beyond.\n" + 
                "The promise of esacpe is met by \n",
                "THE GREEN ROOM - This small chamber resembles nothing that the name suggests.\n" +
                "If it is called the green room, why does it lack any shade of green?\n" +
                "It seems to have the remnants of a feast made for an army that has been picked clean.\n" +
                "The pungent smell of dried sweat and shame is almost unbearable.\n" +
                "An open curtain at the end of the room reveals what seems to be extension of the room.\n" +
                "With the lights flickering a shadowy figure approaches. \n",
                "THE BALCONY - There are strange faraway sounds of people talking in this room.\n" +
                "The sounds can-not be deciphered. The room is completely empty....except for.... \n",
                "THE STAGE - (Reward Room) - This room is filled with the most brilliant colors followed by total and complete darkness.\n" +
                "Between the flashing of lights and the black, are stars. Millions of stars!\n" +
                "Stepping into the room one gets the uncanny impression of floating in deep space.\n" + 
                "On the far end of the stage you can see leftover scraps of food left behind by some lazy raodie.\n" + 
                "The feeling of weightlessness is disrupted by the jastly site of \n",
                                  //Add Reward for Stage Room
                "General Admission - Stepping into this room is like entering a desert during a high sun.\n" +
                "The walls are a faded yellow, and the floor has a sand like pattern. The ceiling is a bright white.\n" +
                "Staying in this room for longer than 5 minutes makes you feel parched.\n" +
                "People are packed shoulder to shoulder here and are being passed over you on their way to one end of the room\n" +
                "where you see the Fun Police hungrily snactching them from the crowd \n" + 
                "You turn to move in the opposite direction but in your way is \n",
                "FRONT ROW - This room is a raging inferno of fire. It isn't magical, and it will hurt.\n" +
                "The magical effect of the room is in keeping the fire contained inside it.\n" +
                "After carefully examining the room, one would realize that there is a safe narrow path inside\n" +
                "which will take you to the other exit(s).\n" +
                "However there is something standing between you and the promise of safer harbors. \n"
            };

            /*
             * "The Backstage!  Entering this room raises your heartbeat to an unnatural level.  The smells are enchanting and the rows of tables host mountains of provisions. At long last, you have found the backstage!  A magical place full of everything that your heart desires.  There is only one thing stopping you from entering the room.....The Fun Police.",
             */

            Random rand = new Random();
            int indexNbr = rand.Next(rooms.Length);
            string room = rooms[indexNbr];
            return room;
        }//end GetRoom()

    }//end class
}//end namespace

